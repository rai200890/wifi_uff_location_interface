<div class="row">
  <bm-alerts bm-items="ctrl.alerts"></bm-alerts>
</div>
<div class="row" ng-if="ctrl.loading">
  <h3 class="text-center">Loading<i class="fa fa-spinner fa-spin"></i></h3>
</div>
<div class="row">
  <div class="container" ng-if="!ctrl.loading">
    <form name="upload_map" class="form-horizontal">
      <div class="form-group" ng-class="{'has-error': ctrl.department.map_url == null, 'has-warning': ctrl.department.map_url}">
        <label for="file" class="control-label col-xs-2">Upload</label>
        <div class="col-xs-10">
          <input name="file" type="file" nv-file-select uploader="ctrl.uploader" class="form-control" options="" />
          <span class="help-block" ng-hide="ctrl.department.map_url">This department has not map yet! Please upload one!</span>
          <span class="help-block" ng-show="ctrl.department.map_url">This department already has a map! Upload one to replace it!</span>
        </div>
      </div>
      <div class="form-group">
        <button uib-tooltip="Cancel" ng-show="ctrl.department.map_url" class="btn btn-warning" name="show_map" ui-sref="root.departments.map({department_id: ctrl.department.id})">Cancel</button>
        <button uib-tooltip="Upload a Map" name="upload" ng-disabled="ctrl.uploader.queue.length == 0" ng-click="ctrl.upload()" type="submit" class="btn btn-primary" ng-if="!ctrl.uploading"> Send </button>
        <button type="submit" class="btn btn-primary" ng-if="ctrl.uploading" disabled>Sending <i class="fa fa-spinner fa-spin"></i></button>
      </div>
    </form>
  </div>
</div>
